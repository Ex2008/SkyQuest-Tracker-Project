<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkyQuest Tracker</title>

<!-- SEO -->
<meta name="description" content="A fun, kid‚Äëfriendly dashboard of live NASA space events, daily images and more.">
<meta name="keywords"    content="NASA, space events, rover photos, asteroid near misses, astronomy picture of the day, kids astronomy">
<meta property="og:title"       content="SkyQuest Tracker">
<meta property="og:description" content="Explore space in real‚Äëtime ‚Äì pictures, asteroids, live space‚Äëweather and more.">
<meta property="og:type"        content="website">

<style>
/* ----------  DESIGN TOKENS ---------- */
:root{
  --deep-navy:#0b0c10;
  --space-black:#1f2833;
  --cosmic-blue:#232931;
  --nebula-teal:#45a29e;
  --stellar-cyan:#66fcf1;
  --white:#ffffff;
  --glass-purple:#7f7fd5;
}

/* ----------  RESET / BASE ---------- */
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,var(--deep-navy) 70%,var(--cosmic-blue) 100%);
  color:var(--white);
  line-height:1.6;-webkit-font-smoothing:antialiased;
}

/* ----------  HEADER ---------- */
header{
  position:sticky;top:0;z-index:1000;
  display:flex;justify-content:space-between;align-items:center;
  padding:1rem 2rem;background:rgba(31,40,51,.6);
  backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(102,252,241,.07);
}
.logo{font-size:1.9rem;font-weight:700;letter-spacing:1.5px;color:var(--stellar-cyan);text-shadow:0 1px 6px var(--glass-purple)}
nav a{color:var(--white);text-decoration:none;font-weight:500;margin:0 .9rem;position:relative;transition:color .2s}
nav a::after{content:'';position:absolute;left:0;bottom:-4px;height:2px;width:0;background:var(--stellar-cyan);transition:width .25s}
nav a:hover{color:var(--stellar-cyan)}nav a:hover::after{width:100%}

/* ----------  SECTIONS ---------- */
section{
  max-width:1200px;margin:4rem auto 0;border-radius:1.8rem;
  background:rgba(35,41,49,.34);padding:4.5rem 2rem;
  box-shadow:0 10px 36px rgba(0,0,0,.23);
  backdrop-filter:blur(16px) saturate(130%);
  border:1px solid rgba(102,252,241,.10);
}
.section-title{font-size:2.2rem;margin-bottom:.8rem;color:var(--stellar-cyan);text-shadow:0 1px 6px var(--glass-purple)}
.section-desc{font-size:1.2rem;opacity:.90;margin-bottom:1.7rem}
.section-flex{display:flex;flex-wrap:wrap;gap:3rem;align-items:center}
.section-img{width:100%;max-width:560px;border-radius:1.4rem;box-shadow:0 6px 30px rgba(127,127,213,.16)}

/* ----------  HERO (APOD) ---------- */
#hero{
  margin:0;
  padding:5rem 1rem 3rem;
  background:linear-gradient(135deg,var(--space-black) 60%,var(--cosmic-blue) 100%);
  text-align:center;
}
.hero-inner{max-width:900px;margin:0 auto}
.apod-wrap{margin-top:2.5rem}
#apod-img{
  width:100%;
  max-width:900px;
  height:auto;
  border-radius:1rem;
  box-shadow:0 8px 32px rgba(0,0,0,.35);
}
#apod-caption{
  margin-top:.6rem;
  font-size:.95rem;
  opacity:.85;
}
/* button-as-link keeps previous styling */
a.btn{display:inline-block;text-decoration:none}

/* ----------  LOCATION BAR ---------- */
.location-bar{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;margin:1rem 0 2rem}
.location-bar input{flex:1 1 220px;min-width:160px;padding:.7rem 1rem;border-radius:.7rem;border:none;font-size:1rem;background:rgba(255,255,255,.10);color:var(--white)}
.location-bar select{padding:.7rem 1rem;border-radius:.7rem;border:none;font-size:1rem;background:rgba(255,255,255,.10);color:var(--white)}
.location-bar button{background:var(--nebula-teal);color:var(--white);border:none;font-size:1rem;padding:.65rem 1.3rem;border-radius:1.8rem;cursor:pointer;font-weight:500;box-shadow:0 3px 16px rgba(69,162,158,.25)}

/* ----------  CARD GRIDS ---------- */
.grid{display:grid;gap:1.4rem;grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
.card{
  background:rgba(31,40,51,.48);border-radius:1rem;padding:1.3rem;
  border:1px solid rgba(102,252,241,.09);box-shadow:0 3px 20px rgba(0,0,0,.18);
  transition:transform .2s,box-shadow .2s
}
.card:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 6px 30px rgba(127,127,213,.25)}
.card h4{font-size:1.1rem;margin-bottom:.6rem;color:var(--stellar-cyan)}
.card p{font-size:.95rem}

/* ----------  MAR¬†ROVER CAROUSEL ---------- */
#mars-photos{display:flex;gap:1rem;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:1rem}
#mars-photos img{height:180px;border-radius:1rem;scroll-snap-align:start;box-shadow:0 4px 18px rgba(0,0,0,.25)}

/* ----------  FOOTER ---------- */
footer{text-align:center;background:rgba(31,40,51,.65);margin-top:4rem;padding:2.5rem 1rem;border-top:2px solid var(--nebula-teal);box-shadow:0 -8px 36px rgba(0,0,0,.18);backdrop-filter:blur(8px)}
footer a{color:var(--white);margin:0 .7rem;font-weight:500;text-decoration:none}

/* ----------  MEDIA ---------- */
@media(max-width:920px){header{flex-direction:column;gap:.6rem}}
@media(max-width:600px){.logo{font-size:1.5rem}nav a{margin:.4rem}}
</style>
</head>
<body>

<header>
  <div class="logo">ü™ê¬†SkyQuest</div>
  <nav>
    <a href="#hero">Home</a>
    <a href="#live-events">Live¬†Events</a>
    <a href="#asteroids">Asteroids</a>
    <a href="#mars">Mars</a>
    <a href="#earth">Earth</a>
  </nav>
</header>

<!-- ---------- HERO (APOD) ---------- -->
<section id="hero">
    <div class="hero-inner">
      <h1 class="hero-title">Explore the Cosmos Every¬†Day</h1>
      <p class="hero-desc">
        Scroll down for today‚Äôs space picture, live space‚Äëweather, asteroid near‚Äëmisses,
        Mars photos‚ÄØand more.
      </p>
  
      <!-- smooth‚Äëscroll link styled as a button -->
      <a href="#live-events" class="btn scroll-link">Jump to Live¬†Events</a>
  
      <!-- Astronomy Picture of the Day -->
      <figure class="apod-wrap">
        <img id="apod-img" alt="Astronomy Picture of the Day" loading="lazy">
        <figcaption id="apod-caption"></figcaption>
      </figure>
    </div>
  </section>
  
<!-- ---------- LIVE DONKI EVENTS ---------- -->
<section id="live-events">
  <h2 class="section-title">Live NASA Space‚ÄëWeather Feed</h2>
  <p class="section-desc">Automatic DONKI notifications (updated every¬†10‚ÄØmin).¬†Filter by place‚Äëname to catch aurora alerts etc.</p>

  <div class="location-bar">
    <input id="loc-input" placeholder="Enter city / country name">
    <select id="city-select">
      <option value="">Popular cities‚Ä¶</option>
      <option value="New York">New¬†York</option>
      <option value="Tokyo">Tokyo</option>
      <option value="Sydney">Sydney</option>
      <option value="London">London</option>
    </select>
    <button id="use-my-loc">Use‚ÄØmy‚ÄØlocation</button>
  </div>

  <div id="donki-grid" class="grid"><p>Loading‚Ä¶</p></div>
</section>

<!-- ---------- ASTEROID NEAR MISSES ---------- -->
<section id="asteroids">
  <h2 class="section-title">Today‚Äôs Asteroid¬†Close¬†Calls</h2>
  <p class="section-desc">Near‚ÄëEarth objects whizzing past us in the last 24‚ÄØh. Distances are shown in lunar‚Äëdistance (LD).</p>
  <div id="asteroid-grid" class="grid"><p>Loading‚Ä¶</p></div>
</section>

<!-- ---------- MARS ROVER PHOTOS ---------- -->
<section id="mars">
  <h2 class="section-title">Latest Mars‚ÄëRover Photos</h2>
  <p class="section-desc">Fresh postcards beamed back by Perseverance.</p>
  <div id="mars-photos"><p>Loading‚Ä¶</p></div>
</section>

<!-- ---------- EPIC EARTH ---------- -->
<section id="earth">
  <h2 class="section-title">Earth from Space ‚Äì¬†Today</h2>
  <p class="section-desc">The DSCOVR/EPIC camera‚Äôs natural‚Äëcolour image of our home planet.</p>
  <img id="earth-img" class="section-img" alt="Earth Today">
  <p id="earth-caption" style="opacity:.85;margin-top:1rem"></p>
</section>

<footer>
  <div class="logo">ü™ê¬†SkyQuest</div>
  <div style="margin:1rem 0">
    <a href="#hero">Home</a> ‚Ä¢
    <a href="#live-events">Live</a> ‚Ä¢
    <a href="#asteroids">Asteroids</a> ‚Ä¢
    <a href="#mars">Mars</a> ‚Ä¢
    <a href="#earth">Earth</a>
  </div>
  <small>&copy;¬†2025¬†SkyQuest¬†Tracker¬†‚Äì¬†All¬†images courtesy of NASA / JPL¬†/¬†GSFC.</small>
</footer>

<!-- ----------  SCRIPTS ---------- -->
<script type="module">
/* ==== CONFIG ==== */
const KEY = 'LSNy9VQ18vB0TgcA8zLN38to6koUkfer2US9aBd8';                       
const donkiGrid   = document.getElementById('donki-grid');
const asteroidGrid= document.getElementById('asteroid-grid');
const marsWrap    = document.getElementById('mars-photos');
const earthImg    = document.getElementById('earth-img');
const earthCap    = document.getElementById('earth-caption');
const heroImg     = document.getElementById('hero-img');

/* ==== APOD HERO ==== */
(async function loadAPOD(){
  try{
    const apod = await fetch(`https://api.nasa.gov/planetary/apod?api_key=${KEY}`)
                  .then(r=>r.json());

    // Use HD version when available
    heroImg.src = apod.hdurl || apod.url;
    heroImg.alt = apod.title || 'Astronomy Picture of the Day';
  }catch(e){
    console.error(e);
    heroImg.src = 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?auto=format&fit=crop&w=1200&q=80';
  }
})();

/* ==== LOCATION HANDLING ==== */
let textFilter = localStorage.getItem('sq_place') || '';
const locInput = document.getElementById('loc-input');
locInput.value = textFilter;
document.getElementById('city-select').addEventListener('change',e=>{
  if(e.target.value){locInput.value=e.target.value;setFilter();}
});
document.getElementById('use-my-loc').addEventListener('click',()=>{
  navigator.geolocation.getCurrentPosition(
    pos=>{textFilter = `${pos.coords.latitude.toFixed(2)},${pos.coords.longitude.toFixed(2)}`;locInput.value=textFilter;localStorage.setItem('sq_place',textFilter);loadDONKI();},
    ()=>alert('Location permission denied.')
  );
});
locInput.addEventListener('keyup',e=>{if(e.key==='Enter')setFilter();});
function setFilter(){textFilter = locInput.value.trim();localStorage.setItem('sq_place',textFilter);loadDONKI();}

/* ==== DONKI ==== */
async function loadDONKI(){
  donkiGrid.innerHTML='<p>Loading‚Ä¶</p>';
  const now=new Date(), start=new Date(now.getTime()-24*60*60*1000);
  const fmt=d=>d.toISOString().split('T')[0];
  try{
    const data = await fetch(`https://api.nasa.gov/DONKI/notifications?startDate=${fmt(start)}&endDate=${fmt(now)}&type=all&api_key=${KEY}`).then(r=>r.json());
    const events = Array.isArray(data)?data:[];

    const filtered = textFilter
      ? events.filter(ev=>ev.messageBody.toLowerCase().includes(textFilter.toLowerCase()))
      : events;

    donkiGrid.innerHTML = filtered.length
      ? filtered.slice(0,12).map(ev=>`
          <article class="card">
            <h4>${ev.messageType} ‚Äì ${ev.messageIssueTime.slice(0,10)}</h4>
            <p>${ev.messageBody.length>160?ev.messageBody.slice(0,160)+'‚Ä¶':ev.messageBody}</p>
            ${ev.messageURL?`<a href="${ev.messageURL}" target="_blank" rel="noopener">Read¬†more¬†‚Üó</a>`:''}
          </article>`).join('')
      : `<p>No events mentioning ‚Äú${textFilter || '‚Äî'}‚Äù in last¬†24‚ÄØh.</p>`;
  }catch(err){
    donkiGrid.innerHTML='<p>Could not load DONKI feed.</p>';
  }
}

/* ==== ASTEROID NEO WS ==== */
async function loadAsteroids(){
  asteroidGrid.innerHTML='<p>Loading‚Ä¶</p>';
  const today=new Date().toISOString().split('T')[0];
  try{
    const res = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${KEY}`).then(r=>r.json());
    const objects = Object.values(res.near_earth_objects || {}).flat();
    objects.sort((a,b)=>a.close_approach_data[0].miss_distance.lunar - b.close_approach_data[0].miss_distance.lunar);
    asteroidGrid.innerHTML = objects.slice(0,10).map(neo=>{
      const dist = (+neo.close_approach_data[0].miss_distance.lunar).toFixed(2);
      return `<article class="card">
                <h4>${neo.name}</h4>
                <p>Miss¬†Distance: <strong>${dist}¬†LD</strong></p>
                <p>Speed: ${(neo.close_approach_data[0].relative_velocity.kilometers_per_hour|0).toLocaleString()}¬†km/h</p>
              </article>`;
    }).join('');
  }catch(e){
    asteroidGrid.innerHTML='<p>Could not load asteroid data.</p>';
  }
}

/* ==== MARS ROVER PHOTOS ==== */
async function loadMars(){
  marsWrap.innerHTML='<p>Loading‚Ä¶</p>';
  try{
    const data = await fetch(`https://api.nasa.gov/mars-photos/api/v1/rovers/perseverance/latest_photos?api_key=${KEY}`).then(r=>r.json());
    marsWrap.innerHTML = (data.latest_photos||[]).slice(0,15).map(p=>`
      <img src="${p.img_src}" alt="Mars" loading="lazy">`).join('');
  }catch(e){marsWrap.innerHTML='<p>Could not load Mars photos.</p>';}
}

/* ==== EPIC EARTH ==== */
async function loadEarth(){
  try{
    const list = await fetch(`https://epic.gsfc.nasa.gov/api/natural`).then(r=>r.json());
    if(!list.length) return;
    const pic = list[0];
    const dt  = new Date(pic.date);
    const path = `${dt.getUTCFullYear()}/${String(dt.getUTCMonth()+1).padStart(2,'0')}/${String(dt.getUTCDate()).padStart(2,'0')}`;
    earthImg.src = `https://epic.gsfc.nasa.gov/archive/natural/${path}/png/${pic.image}.png`;
    earthCap.textContent = `Captured ${dt.toUTCString()} by DSCOVR/EPIC.`;
  }catch(e){earthCap.textContent='Could not load EPIC image.';}
}

/* ==== INITIAL LOAD + TIMERS ==== */
loadDONKI();loadAsteroids();loadMars();loadEarth();
setInterval(loadDONKI,10*60*1000);
setInterval(loadAsteroids,6*60*60*1000);   // asteroids update daily
</script>
</body>
</html>
