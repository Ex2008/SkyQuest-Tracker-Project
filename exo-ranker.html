<!-- exoâ€‘ranker.html  â€”  STATIC showcase, no runtime API keys needed -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Exoâ€‘Ranker â€“ Earthâ€‘like Exoplanets</title>

  <!-- â”€â”€â”€ minimal glassâ€‘morphism theme â”€â”€â”€ -->
  <style>
    :root{
      --navy:#0b0c10;--blue:#232931;--cyan:#66fcf1;--purple:#7f7fd5;--white:#fff;
      --panel-bg:rgba(35,41,49,.55);--border:rgba(102,252,241,.12);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Segoe UI",Arial,sans-serif}
    body{
      min-height:100vh;display:flex;flex-direction:column;color:var(--white);
      background:linear-gradient(135deg,var(--navy) 70%,var(--blue) 100%);
    }
    header{
      display:flex;justify-content:space-between;align-items:center;
      padding:1rem 2rem;background:rgba(31,40,51,.6);backdrop-filter:blur(8px);
    }
    .logo{font-size:1.75rem;font-weight:700;color:var(--cyan)}
    header a{color:var(--white);text-decoration:none;font-weight:600}
    header a:hover{text-decoration:underline}
    main{flex:1;width:100%;max-width:1280px;margin:0 auto;padding:2rem;text-align:center}
    h1{font-size:2.3rem;margin-bottom:1rem}
    h1 span{color:var(--cyan)}
    select{
      padding:.45rem .8rem;border-radius:.55rem;border:1px solid var(--border);
      background:#111;color:#fff;font-size:1rem;min-width:220px;margin:.3rem .6rem;
    }
    #chart{
      margin-top:1.8rem;height:620px;border:1px solid var(--border);
      border-radius:1rem;
    }
    #info{
      margin-top:1.5rem;padding:1rem;min-height:140px;
      background:var(--panel-bg);border:1px solid var(--border);border-radius:1rem;
    }
    #info h2{color:var(--cyan);margin-bottom:.4rem}
  </style>
</head>
<body>
  <header>
    <div class="logo">ğŸªÂ SkyQuestÂ /Â Exoâ€‘Ranker</div>
    <nav><a href="index.html">â†Â BackÂ Home</a></nav>
  </header>

  <main>
    <h1>Which <span>exoplanets</span> look most Earthâ€‘like?</h1>

    <p>Choose any two numerical parameters to explore the full catalogue.</p>

    <div style="margin-top:1.2rem">
      <label for="xSel">Xâ€‘axis</label>
      <select id="xSel"></select>

      <label for="ySel" style="margin-left:.9rem">Yâ€‘axis</label>
      <select id="ySel"></select>
    </div>

    <div id="chart"></div>

    <div id="info"><em>Click a planet dot to read its 150â€‘word explainer.</em></div>
  </main>

  <!-- Plotly CDN -->
 <script>
const palette = ['#66fcf1','#ffcc00','#ff6666','#9966ff','#00d084','#ff7eb3','#ffa600'];

// Key features for dropdown prioritization
const keyFeatures = ['pl_rade','pl_bmasse','pl_eqt','st_teff','st_rad','st_mass'];

// Human-readable labels for all known features
const featureLabels = {
  // Key features
  pl_rade: "Planet Radius (RâŠ•)",
  pl_bmasse: "Planet Mass (MâŠ•)",
  pl_eqt: "Equilibrium Temperature (K)",
  st_teff: "Star Temperature (K)",
  st_rad: "Star Radius (Râ˜‰)",
  st_mass: "Star Mass (Mâ˜‰)",

  // Orbital & discovery
  pl_orbper: "Orbital Period (days)",
  pl_orbpererr1: "Orbital Period Error (+)",
  pl_orbpererr2: "Orbital Period Error (â€“)",
  pl_orbperlim: "Orbital Period Limit Flag",
  pl_orbsmax: "Orbit Semi-Major Axis (AU)",
  pl_orbsmaxerr1: "Axis Error (+)",
  pl_orbsmaxerr2: "Axis Error (â€“)",
  pl_orbsmaxlim: "Axis Limit Flag",
  pl_orbeccen: "Orbital Eccentricity",
  pl_orbeccenerr1: "Eccentricity Error (+)",
  pl_orbeccenerr2: "Eccentricity Error (â€“)",
  pl_orbeccenlim: "Eccentricity Limit Flag",

  // Radius, mass
  pl_radeerr1: "Radius Error (+)",
  pl_radeerr2: "Radius Error (â€“)",
  pl_radelim: "Radius Limit Flag",
  pl_radj: "Radius (Jupiter)",
  pl_radjerr1: "Radius (Jupiter) Error (+)",
  pl_radjerr2: "Radius (Jupiter) Error (â€“)",
  pl_radjlim: "Radius (Jupiter) Limit Flag",
  pl_bmasseerr1: "Mass Error (+)",
  pl_bmasseerr2: "Mass Error (â€“)",
  pl_bmasselim: "Mass Limit Flag",
  pl_bmassj: "Mass (Jupiter)",
  pl_bmassjerr1: "Mass (Jupiter) Error (+)",
  pl_bmassjerr2: "Mass (Jupiter) Error (â€“)",
  pl_bmassjlim: "Mass (Jupiter) Limit Flag",
  pl_bmassprov: "Mass Provenance",

  // Star parameters
  st_spectype: "Spectral Type",
  st_logg: "Surface Gravity (log g)",
  st_loggerr1: "Gravity Error (+)",
  st_loggerr2: "Gravity Error (â€“)",
  st_logglim: "Gravity Limit",
  st_met: "Metallicity",
  st_meterr1: "Metallicity Error (+)",
  st_meterr2: "Metallicity Error (â€“)",
  st_metlim: "Metallicity Limit",
  st_metratio: "Metallicity Ratio",

  // Distance & brightness
  sy_dist: "System Distance (pc)",
  sy_disterr1: "Distance Error (+)",
  sy_disterr2: "Distance Error (â€“)",
  sy_vmag: "Visual Magnitude (V)",
  sy_vmagerr1: "Vmag Error (+)",
  sy_vmagerr2: "Vmag Error (â€“)",
  sy_kmag: "Infrared Magnitude (K)",
  sy_kmagerr1: "Kmag Error (+)",
  sy_kmagerr2: "Kmag Error (â€“)",
  sy_gaiamag: "Gaia Magnitude",
  sy_gaiamagerr1: "GaiaMag Error (+)",
  sy_gaiamagerr2: "GaiaMag Error (â€“)",

  // Discovery & flags
  disc_year: "Discovery Year",
  discoverymethod: "Discovery Method",
  disc_facility: "Discovery Facility",
  pl_controv_flag: "Controversial Detection",
  ttv_flag: "TTV Flag",
  sy_snum: "# Stars in System",
  sy_pnum: "# Planets in System"
};


(async () => {
  let data;
  try {
    const res = await fetch('planet_data.json');
    data = await res.json();
  } catch (err) {
    document.getElementById('chart').innerHTML =
      '<p style="padding:2rem">Could not load <code>planet_data.json</code>.</p>';
    return;
  }

  const allKeys = Object.keys(data[0]).filter(k => typeof data[0][k] === 'number' && k !== 'cluster');
  const orderedKeys = [...keyFeatures, ...allKeys.filter(k => !keyFeatures.includes(k))];

  const xSel = document.getElementById('xSel');
  const ySel = document.getElementById('ySel');

  orderedKeys.forEach(k => {
    const label = featureLabels[k] ? `${k} â€“ ${featureLabels[k]}` : `${k} â€“ [Unlabeled]`;
    const opt = `<option value="${k}">${label}</option>`;
    xSel.insertAdjacentHTML('beforeend', opt);
    ySel.insertAdjacentHTML('beforeend', opt);
  });

  xSel.value = 'pl_rade';
  ySel.value = 'pl_bmasse';

  function plot() {
    const x = xSel.value, y = ySel.value;
    const xLabel = featureLabels[x] || x;
    const yLabel = featureLabels[y] || y;

    const clusters = [...new Set(data.map(d => d.cluster))].sort();
    const traces = clusters.map((c, i) => {
      const pts = data.filter(d => d.cluster === c && d.pl_name !== "Earth");
      return {
        x: pts.map(p => p[x]),
        y: pts.map(p => p[y]),
        text: pts.map(p => p.pl_name),
        customdata: pts,
        mode: 'markers',
        type: 'scatter',
        name: `Cluster ${c}`,
        marker: {
          color: palette[i % palette.length],
          size: 7,
          opacity: 0.8,
          line: { width: 0 }
        }
      };
    });

    const earth = data.find(p => p.pl_name === "Earth");
    if (earth) {
      traces.push({
        x: [earth[x]],
        y: [earth[y]],
        text: ["ğŸŒ Earth"],
        customdata: [earth],
        mode: 'markers+text',
        type: 'scatter',
        name: 'ğŸŒ Earth',
        textposition: 'top center',
        marker: {
          color: '#FFD700',
          size: 18,
          symbol: 'star',
          line: { color: '#000', width: 2 }
        }
      });
    }

    Plotly.newPlot('chart', traces, {
      title: `${xLabel} vs ${yLabel}`,
      xaxis: { title: xLabel, zeroline: false },
      yaxis: { title: yLabel, zeroline: false },
      template: 'plotly_dark',
      margin: { l: 60, r: 20, t: 60, b: 60 },
      legend: { orientation: 'h', x: 0.01, y: 1.3 },
      dragmode: 'pan'
    }, { responsive: true });
  }

  document.getElementById('chart').addEventListener('plotly_click', ev => {
    const p = ev.detail.points[0].customdata;
    document.getElementById('info').innerHTML =
      `<h2>${p.pl_name}</h2>
       <p><strong>Cluster:</strong> ${p.cluster} â€¢ <strong>Temp class:</strong> ${p.temp_class}</p>
       <p>${p.explanation}</p>`;
  });

  xSel.onchange = plot;
  ySel.onchange = plot;
  plot();
})();
</script>

</body>
</html>
