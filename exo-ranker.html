<!-- exo‑ranker.html  —  STATIC showcase, no runtime API keys needed -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Exo‑Ranker – Earth‑like Exoplanets</title>

  <!-- ─── minimal glass‑morphism theme ─── -->
  <style>
    :root{
      --navy:#0b0c10;--blue:#232931;--cyan:#66fcf1;--purple:#7f7fd5;--white:#fff;
      --panel-bg:rgba(35,41,49,.55);--border:rgba(102,252,241,.12);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Segoe UI",Arial,sans-serif}
    body{
      min-height:100vh;display:flex;flex-direction:column;color:var(--white);
      background:linear-gradient(135deg,var(--navy) 70%,var(--blue) 100%);
    }
    header{
      display:flex;justify-content:space-between;align-items:center;
      padding:1rem 2rem;background:rgba(31,40,51,.6);backdrop-filter:blur(8px);
    }
    .logo{font-size:1.75rem;font-weight:700;color:var(--cyan)}
    header a{color:var(--white);text-decoration:none;font-weight:600}
    header a:hover{text-decoration:underline}
    main{flex:1;width:100%;max-width:1280px;margin:0 auto;padding:2rem;text-align:center}
    h1{font-size:2.3rem;margin-bottom:1rem}
    h1 span{color:var(--cyan)}
    select{
      padding:.45rem .8rem;border-radius:.55rem;border:1px solid var(--border);
      background:#111;color:#fff;font-size:1rem;min-width:170px;margin:.3rem .6rem;
    }
    #chart{
      margin-top:1.8rem;height:620px;border:1px solid var(--border);
      border-radius:1rem;
    }
    #info{
      margin-top:1.5rem;padding:1rem;min-height:140px;
      background:var(--panel-bg);border:1px solid var(--border);border-radius:1rem;
    }
    #info h2{color:var(--cyan);margin-bottom:.4rem}
  </style>
</head>
<body>
  <header>
    <div class="logo">🪐 SkyQuest / Exo‑Ranker</div>
    <nav><a href="index.html">← Back Home</a></nav>
  </header>

  <main>
    <h1>Which <span>exoplanets</span> look most Earth‑like?</h1>

    <p>Choose any two numerical parameters to explore the full catalogue.</p>

    <div style="margin-top:1.2rem">
      <label for="xSel">X‑axis</label>
      <select id="xSel"></select>

      <label for="ySel" style="margin-left:.9rem">Y‑axis</label>
      <select id="ySel"></select>
    </div>

    <div id="chart"></div>

    <div id="info"><em>Click a planet dot to read its 150‑word explainer.</em></div>
  </main>

  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
  <script>
  /* ---------- helper palette ---------- */
  const palette = ['#66fcf1','#ffcc00','#ff6666','#9966ff','#00d084','#ff7eb3','#ffa600'];

  /* ---------- main ---------- */
  (async () => {
    let data;
    try {
      const res = await fetch('planet_data.json');   // <‑‑ your pre‑generated file
      data = await res.json();
    } catch(err){
      document.getElementById('chart').innerHTML =
        '<p style=\"padding:2rem\">Could not load <code>planet_data.json</code>.</p>';
      return;
    }

    /* populate dropdowns with all numeric keys except cluster */
    const numericKeys = Object.keys(data[0]).filter(
      k => typeof data[0][k] === 'number' && k !== 'cluster'
    ).sort();

    const xSel = document.getElementById('xSel');
    const ySel = document.getElementById('ySel');
    numericKeys.forEach(k=>{
      const opt = `<option value="${k}">${k}</option>`;
      xSel.insertAdjacentHTML('beforeend',opt);
      ySel.insertAdjacentHTML('beforeend',opt);
    });
    xSel.value = 'pl_rade';
    ySel.value = 'pl_bmasse';

    /* draw / redraw plot */
    function plot(){
      const x = xSel.value, y = ySel.value;
      const clusters = [...new Set(data.map(d=>d.cluster))].sort();
      const traces = clusters.map((c,i)=>{
        const pts = data.filter(d=>d.cluster===c);
        return {
          x: pts.map(p=>p[x]),
          y: pts.map(p=>p[y]),
          text: pts.map(p=>p.pl_name),
          customdata: pts,
          mode:'markers', type:'scatter',
          name:`Cluster ${c}`,
          marker:{color:palette[i%palette.length],size:7,opacity:0.8,line:{width:0}}
        };
      });

      Plotly.newPlot('chart', traces, {
        title:`${x} vs ${y}`,
        xaxis:{title:x, zeroline:false},
        yaxis:{title:y, zeroline:false},
        template:'plotly_dark',
        margin:{l:60,r:20,t:60,b:60},
        legend:{orientation:'h',x:0.01,y:1.12},
        dragmode:'pan'
      }, {responsive:true});
    }

    /* show explainer on click */
    document.getElementById('chart')
      .addEventListener('plotly_click', ev=>{
        const p = ev.detail.points[0].customdata;
        document.getElementById('info').innerHTML =
          `<h2>${p.pl_name}</h2>
           <p><strong>Cluster:</strong> ${p.cluster} • <strong>Temp class:</strong> ${p.temp_class}</p>
           <p>${p.explanation}</p>`;
      });

    xSel.onchange = plot;
    ySel.onchange = plot;
    plot();   // initial
  })();
  </script>
</body>
</html>
